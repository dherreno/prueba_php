pipeline {
  agent {docker}

  
  stages {
    stage('install') {
      agent { 
        docker {
           label "docker" 
            image "hello-php"
           }
           }
      steps {
        sh 'docker run -v /var/run/docker.sock:/var/run/docker.sock'
        }
      }

    stage('test') {
      steps {
        echo 'test'
        }
      }

    stage('build') {
      steps {
        echo 'build'
        }
      }

    stage('deploy') {
      steps {
        sh 'docker run -p 5009:80 -d -v D:\\\\Usuarios\\\\analista.tic3\\\\Desktop\\\\docker-php/src:/var/www/html/  hello-php --privileged'
      }
    }
  }

}
